<div id="tab-panel" role="tabpanel">

    <div id="task-card" class="card">
        <p class="dots">...</p>
        <div class="card-header">
            <div class="mui-dropdown" style="flex:1;">

                <button data-mui-toggle="dropdown" style="background: none;
                outline: none;
                border: none;">
                    <img width="30" height="30" src="/static/filterYellow.png" />
                </button>

                <ul class="mui-dropdown__menu">
                    <li onclick="filterTasks()">No filter</li>
                    {{ range .taskTags }}
                    <li onclick="filterTasks('{{ . }}')">{{ . }}</li>
                    {{ end }}
                </ul>

            </div>

            <h3 class="card-title">Task List</h3>
            <div class="export-div">
                <img width="30" height="30" src="/static/exportYellow.png" />
            </div>
        </div>
        <div id="task-card-content" class="card-content">
            {{ range .tasks }}

            <div id="task-{{ .Id }}" class="card-block" data-tags="{{ .DisplayTags }}">
                <form hx-post="/htmx/home/tasks" hx-target="body" hx-swap="beforeend">
                    <input type="hidden" name="id" value="{{ .Id }}" required></input>
                    <div class="card-container">
                        <b class="card-block-point">{{ .Value }}</b>

                        <div class="card-date-container">
                            <label>Deadline:</label>
                            <b class="card-block-date">{{ .DisplayDeadline }}</b>
                        </div>

                        <p class="card-block-notes">{{ .DisplayTags }}</p>


                        <input type="hidden" name="value" value="{{ .Value }}" readonly required></input>
                        <input type="hidden" name="deadline" value="{{ .DisplayDeadline }}" class="card-block-date"
                            readonly required></input>
                        <input type="hidden" name="localDeadline" value="{{ .HTMLDeadline }}" required></input>
                        <input type="hidden" name="tags" value="{{ .DisplayTags }}" class="card-block-notes" readonly
                            required></input>
                    </div>

                    <div class="edit-container">
                        <button type="submit">
                            <img src="/static/editYellow.png" width="25" height="25" />
                        </button>
                    </div>
                    {{ $.csrfField }}
                </form>
            </div>

            {{ else }}

            <span>No other tasks.</span>

            {{ end }}
        </div>

        <script>
            var taskCardContent = document.getElementById("task-card-content");

            function filterTasks(target) {
                if (!target) {
                    for (var i = 0; i < taskCardContent.children.length; i++) {
                        
                        taskCardContent.children[i].style.display = "block";

                        /*
                        taskCardContent.children[i].style.height = "auto";
                        taskCardContent.children[i].style.opacity = "1";
                        */
                    }
                    return
                }
                for (var i = 0; i < taskCardContent.children.length; i++) {
        /*
                    if (taskCardContent.children[i].getAttribute("data-tags").includes(target)){
                        taskCardContent.children[i].style.height = "auto";
                        taskCardContent.children[i].style.opacity = "1";
                    } else {
                        taskCardContent.children[i].style.height = "0";
                        taskCardContent.children[i].style.opacity = "0";
                    }
        */

                    taskCardContent.children[i].style.display =
                        taskCardContent.children[i].getAttribute("data-tags").includes(target) ?
                            "block" : "none";


                }
            }



        </script>

    </div>


    <div id="event-card" class="card">
        <p class="dots">...</p>
        <div class="card-header">
            <div class="mui-dropdown" style="flex:1;">

                <button data-mui-toggle="dropdown" style="background: none;
                outline: none;
                border: none;">
                    <img width="30" height="30" src="/static/filterYellow.png" />
                </button>

                <ul class="mui-dropdown__menu">
                    <li onclick="filterEvents()">No filter</li>
                    {{ range .eventTags }}
                    <li onclick="filterEvents('{{ . }}')">{{ . }}</li>
                    {{ end }}
                </ul>

            </div>
            <h3 class="card-title">Events</h3>
            <div class="export-div">
                <img id="export-yellow" width="30" height="30" style="display:block;" onclick="toggleExport()"
                    src="/static/exportYellow.png" />
                <img id="export-blue" width="30" height="30" style="display: none;" onclick="toggleExport()"
                    src="/static/exportBlue.png" />
            </div>

        </div>
        <div id="event-card-content" class="card-content">
            {{ range .events }}

            <div id="event-{{ .Id }}" class="card-block" data-tags="{{ .DisplayTags }}">
                <form hx-post="/htmx/home/events" hx-target="body" hx-swap="beforeend">
                    <input type="hidden" name="id" value="{{ .Id }}" required></input>
                    <div class="card-container">
                        <input type="text" name="value" value="{{ .Value }}" class="card-block-point" readonly
                            required></input>

                        <div class="card-date-container">
                            <label>Start:</label>
                            <input type="text" name="displayDateStart" value="{{ .DisplayDateStart }}"
                                class="card-block-date" readonly required></input>
                        </div>

                        <div class="card-date-container">
                            <label>End:&nbsp;&nbsp;</label>
                            <input type="text" name="displayDateEnd" value="{{ .DisplayDateEnd }}"
                                class="card-block-date" readonly required></input>
                        </div>

                        {{ if .Location }}

                        <input type="text" name="location" value="{{ .Location }}" class="card-block-notes" readonly
                            required></input>

                        {{ end }}

                        <input type="text" name="tags" value="{{ .DisplayTags }}" class="card-block-notes" readonly
                            required></input>

                        <input type="hidden" name="localDateStart" value="{{ .HTMLDateStart }}" required></input>
                        <input type="hidden" name="localDateEnd" value="{{ .HTMLDateEnd }}" required></input>
                    </div>

                    <div class="edit-container">
                        <button type="submit">
                            <img src="/static/editYellow.png" width="25" height="25" />
                        </button>
                    </div>
                    {{ $.csrfField }}
                </form>
            </div>

            {{ else }}

            <span>No events.</span>

            {{ end }}

        </div>


        <script>
            var exportYellow = document.getElementById("export-yellow");
            var exportBlue = document.getElementById("export-blue");

            function toggleExport() {
                if (exportYellow.style.display === "block") {
                    exportYellow.style.display = "none";
                    exportBlue.style.display = "block";
                } else {
                    exportBlue.style.display = "none";
                    exportYellow.style.display = "block";
                }
            }


            var eventCardContent = document.getElementById("event-card-content");

            function filterEvents(target) {
                if (!target) {
                    for (var i = 0; i < eventCardContent.children.length; i++) {
                        eventCardContent.children[i].style.display = "block";
                    }
                    return
                }
                for (var i = 0; i < eventCardContent.children.length; i++) {
                    eventCardContent.children[i].style.display =
                        eventCardContent.children[i].getAttribute("data-tags").includes(target) ?
                            "block" : "none";
                }
            }
        </script>
    </div>

    <!--div id="summary-card" class="card">
        <p class="dots">...</p>
        <div class="card-header">
            <div style="flex: 1;"></div>
            <h3 class="card-title">Summary</h3>
            <div class="export-div">
                <img width="25" height="25" src="/static/exportYellow.png" />
            </div>
        </div>

        <div class="card-content">
            {{ range .summaries }}

            <div class="card-summary-container">
                <p class="card-block-point">{{ .Title }}</p>
                <p class="card-block-date">{{ .Date }}</p>


                <ul>
                    {{ range .Points }}
                    <div class="card-block-summary">
                        <div class="card-container">
                            <li>{{ . }}</li>
                        </div>
                    </div>
                    {{ end }}
                </ul>

                <u class="card-block-point">Important Notes</u>

                <ul>
                    {{ range .ImportantPoints }}

                    <div class="card-block-summary">
                        <div class="card-container">
                            <li>{{ . }}</li>
                        </div>
                    </div>

                    {{ end }}
                </ul>
            </div>


            {{ else }}

            <span>No events.</span>

            {{ end }}

        </div>
    </div-->
</div>
