<div id="modal" _="on closeModal add .closing then wait for animationend then remove me">
    <div class="modal-underlay" _="on click trigger closeModal"></div>
    <div class="modal-content">

        <form id="modal-event-form" class="mui-form" hx-put="/htmx/home/events" hx-swap="outerhtml"
            hx-target="#event-{{ .Id }}">
            <legend>Edit Event</legend>
            <input name="id" type="hidden" value="{{ .Id }}" required></input>

            <div class="mui-textfield mui-textfield--float-label">
                <input id="modal-event-value" name="value" type="text" value="{{ .Value }}" required></input>
                <label>Event Title</label>
            </div>
            <div class="mui-textfield mui-textfield--float-label">
                <input id="modal-event-location" name="location" type="text" value="{{ .Location }}"></input>
                <label>Location</label>
            </div>
            <div class="mui-textfield mui-textfield--float-label">
                <input id="modal-event-date-start" name="dateStart" type="datetime-local" value="{{ .HTMLDateStart }}"
                    required></input>
                <label>Start date</label>
            </div>
            <div class="mui-textfield mui-textfield--float-label">
                <input id="modal-event-date-end" name="dateEnd" type="datetime-local" value="{{ .HTMLDateEnd }}"
                    required></input>
                <label>End date</label>
            </div>
            <div class="mui-textfield mui-textfield--float-label">
                <input id="modal-event-tags" name="tags" type="text" value="{{ .DisplayTags }}" required></input>
                <label>Tags</label>
            </div>

            <p id="modal-event-date-warning">End date should be after start date!</p>

            {{ .csrfField }}

            <button id="modal-event-submit-button" class="mui-btn mui-btn--raised"
                _="on click trigger closeModal">Save</button>

            <script>
                var modalEventValue = document.getElementById("modal-event-value");
                //var modalEventLocation = document.getElementById("modal-event-location");

                var modalEventDateStart = document.getElementById("modal-event-date-start");
                var modalEventDateEnd = document.getElementById("modal-event-date-end");
                var modalEventSubmitButton = document.getElementById("modal-event-submit-button");
                var modalEventDateWarning = document.getElementById("modal-event-date-warning");

                modalEventDateStart.addEventListener("input", function () {
                    const eventStartDate = new Date(modalEventDateStart.value)
                    const eventEndDate = new Date(modalEventDateEnd.value)
                    console.log(eventStartDate)
                    console.log(eventEndDate)
                    modalEventSubmitButton.disabled = eventEndDate <= eventStartDate;
                    if (eventEndDate <= eventStartDate) {
                        modalEventDateWarning.style.height = "1.5rem";
                        modalEventDateWarning.style.opacity = 1;
                    } else {
                        modalEventDateWarning.style.height = "0rem";
                        modalEventDateWarning.style.opacity = 0;
                    }
                });

                modalEventDateEnd.addEventListener("input", function () {
                    const eventStartDate = new Date(modalEventDateStart.value)
                    const eventEndDate = new Date(modalEventDateEnd.value)
                    console.log(eventStartDate)
                    console.log(eventEndDate)
                    modalEventSubmitButton.disabled = eventEndDate <= eventStartDate;
                    if (eventEndDate <= eventStartDate) {
                        modalEventDateWarning.style.height = "1.5rem";
                        modalEventDateWarning.style.opacity = 1;
                    } else {
                        modalEventDateWarning.style.height = "0rem";
                        modalEventDateWarning.style.opacity = 0;
                    }
                });


                modalEventValue.addEventListener("input", function () {
                    modalEventSubmitButton.disabled = modalEventValue.value === ""
                })

            </script>
        </form>
    </div>
</div>
