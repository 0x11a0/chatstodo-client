<div class="card-header">
    <div class="card-filter-button">
        <select class="card-filter">
            <option onclick="filterSummaries()"></option>
            {{ range .summaryTags }}

            <option onclick="filterSummaries('{{ . }}')">{{ . }}</option>

            {{ end }}
        </select>
    </div>

    <h3 class="card-title">Summary</h3>

    <div style="flex:1;"></div>
</div>

<div id="summary-card-content" class="card-content">

    {{ range .summaries }}

    <div id="summary-{{ .Id }}" class="card-block" data-tags="{{ .DisplayTags }}">
        
        <div class="card-container">

            <p class="card-block-summary">{{ .Value }}</p>

            <div class="card-block-tags">

                {{ range .Tags }}
                <div class="card-tag" onclick="filterSummaries('{{ . }}')">
                    <b>{{ . }}</b>
                </div>

                {{ end }}

            </div>

        </div>

        <input type="hidden" name="tags" value="{{ .DisplayTags }}" class="card-hidden-tags" readonly required>
    </div>

    {{ else }}

    <p>No summaries found.</p>

    {{ end }}

</div>

<script>
    var summaryCardTags = document.getElementById("summary-card-content")
        .querySelectorAll(".card-hidden-tags");

    function filterSummaries(target) {
        if (!target) {
            for (var i = 0; i < summaryCardTags.length; i++) {
                summaryCardTags[i].closest(".card-block").style.display = "block";
            }
            return
        }
        for (var i = 0; i < summaryCardTags.length; i++) {
            summaryCardTags[i].closest(".card-block").style.display =
                summaryCardTags[i].value.includes(target) ?
                    "block" : "none";
        }
    }
</script>